"use strict";var _slicedToArray=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function e(t,n,r){function o(a,l){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!l&&c)return c(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var s=n[a]={exports:{}};t[a][0].call(s.exports,function(e){var n=t[a][1][e];return o(n?n:e)},s,s.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){!function(){function t(){var e=new XMLHttpRequest,t=void 0;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){try{t=JSON.parse(e.response)}catch(e){alert("Invalid Server response. Sorry!")}l=new a(t)}},e.open("GET","data/image_posts.json"),e.send()}function n(e,t){var n=1e3*parseFloat(window.getComputedStyle(t).transitionDuration);"in"==e?(t.style.display="block",t.style.opacity=0,setTimeout(function(){t.style.opacity=1},4)):(t.style.opacity=0,setTimeout(function(){t.style.display="none"},n))}function r(e,t){var n=e.className.split(" ");return n.indexOf(t)>-1}function o(e,t){var n=e.className.split(" "),r=n.indexOf(t);r>-1&&n.splice(r,1),e.className=n.join(" ")}function i(e,t){r(e,t)||(e.className+=" "+t)}var a=(e("./modules/scrollbar.es6.js"),e("./modules/image-collection.es6.js")),l={};t(),document.addEventListener("DOMContentLoaded",function(){function e(e){var t=a.nicknameNode,n=a.commentNode,r=e.target,o=a.button;r.value&&(r.style.borderColor=""),r.value||(o.style.cursor=""),t.value&&n.value&&(o.style.cursor="pointer")}var t=function(){var e=document.querySelector(".popup.orientation-chose");return function(t){var r=t.target.files[0],o=/^image\//,i=void 0;if(r){if(!o.test(r.type))return void alert("You must upload an image!");i=new FileReader,i.onload=function(t){var r=e.querySelectorAll("img");[].forEach.call(r,function(e){e.src=t.target.result}),n("in",e)},i.readAsDataURL(r)}}}();document.querySelector('input[type="file"]').addEventListener("change",t);var a=document.querySelector(".popup-comments");a.nicknameNode=document.getElementById("nickname"),a.commentNode=document.getElementById("comment"),a.nicknameLabel=document.querySelector('[for="nickname"]'),a.commentLabel=document.querySelector('[for="comment"]'),a.placeholders={nickname:a.nicknameLabel.getAttribute("data-placeholder"),comment:a.commentLabel.getAttribute("data-placeholder")},a.button=document.querySelector(".send-button"),a.clearInputs=function(){this.nicknameNode.value=this.commentNode.value="",this.nicknameLabel.setAttribute("data-placeholder",this.placeholders.nickname),this.commentLabel.setAttribute("data-placeholder",this.placeholders.comment),this.button.style.cursor="not-allowed"};var c=function(){var e=a.placeholders;return function(t){var n=t.target;if("INPUT"===n.tagName){var r=n.nextElementSibling;n.value?(n.style.borderColor="",r.setAttribute("data-placeholder","")):(n.style.borderColor="red",r.style.color="red",r.setAttribute("data-placeholder",e[n.id]))}}}();a.addEventListener("blur",c,!0),a.addEventListener("input",e);var s=function(){function e(e){var t=+e.getAttribute("data-id"),r=l.getImagePost(t);m.style.backgroundImage="url("+r.imgBig+")",p.setAttribute("data-count",r.likes),v.setAttribute("data-count",r.dislikes),"like"==r.myEvaluation?i(p.parentNode,"clicked"):"dislike"==r.myEvaluation&&i(v.parentNode,"clicked"),n("in",d),r.showComments(t),d.currentId=t}function t(e,t){l.addImagePost({imgBig:e,orientation:t}),n("out",f)}function c(e){if("I"===e.tagName&&(e=e.parentNode),!r(e,"clicked")){var t=d.querySelector(".image-button.clicked"),n=r(e,"like");t&&(o(t,"clicked"),l.evaluate(d.currentId,!n,!1,t)),i(e,"clicked"),l.evaluate(d.currentId,n,!0,e)}}function s(){var e=a.nicknameNode.value,t=a.commentNode.value;if(e&&t){a.nicknameNode.value=a.commentNode.value="",a.clearInputs();var n=new Date;l.addComment(d.currentId,{text:t,nickname:e,date:n})}}function u(){var e=d.querySelector(".clicked");e&&o(e,"clicked");var t=a.nicknameNode,n=a.commentNode,r=a.nicknameLabel,i=a.commentLabel;t.value=n.value="",t.style.borderColor=n.style.borderColor="",r.style.color=i.style.color="",a.button.style.cursor="",a.clearInputs()}var d=document.querySelector(".popup.big-img"),m=d.querySelector(".image-big"),p=d.querySelector(".sprite-like"),v=d.querySelector(".sprite-dislike"),f=(d.querySelector("h2 span"),document.querySelector(".popup.orientation-chose")),h=void 0;return function(o){var i=o.target;"IMG"===i.tagName?e(i):(h=i.getAttribute("data-orientation"))?t(i.firstElementChild.src,h):r(i,"image-button")||r(i.parentNode,"image-button")?c(i):r(i,"sprite-close")?(u(),n("out",d)):(r(i,"send-button")||r(i.parentNode,"send-button"))&&(s(),o.preventDefault())}}();document.body.addEventListener("click",s)})}()},{"./modules/image-collection.es6.js":2,"./modules/scrollbar.es6.js":3}],2:[function(e,t,n){!function(){function n(e){function t(e){for(var t=0,n=0,r=e.length;n<r;n++)t=e[n].id>t?e[n].id:t;return t}for(var n=[],o=t(e),i=0,a=e.length;i<a;i++)n.push(new r(e[i]));this.getImagePost=function(e){for(var t=0,r=n.length;t<r;t++)if(n[t].id===e)return n[t];console.log("No image post with id:",e)},this.addImagePost=function(e){e.id||(e.id=++o);var t=new r(e);n.push(t)}}function r(e){var t=this;this.id=e.id||null,this.imgSmall=e.imgSmall||e.imgBig,this.imgBig=e.imgBig,this.orientation=e.orientation||"normal",this.likes=e.likes||0,this.dislikes=e.dislikes||0,this.comments=[],this.myEvaluation=null,e.comments&&e.comments.sort(function(e,t){return t.date-e.date}),e.comments&&e.comments.forEach(function(e){t.comments.push(new i(e.text,e.nickname,e.date))}),this.node=o(this)}function o(e){function t(e,t){var n=document.createElement("I");return n.className="sprite "+e,n.setAttribute("data-count",t),n}var n=void 0,r=void 0,o=void 0;switch(n=document.createElement("DIV"),e.orientation){case"landscape":n.className="grid-item grid-item--width";break;case"portrait":n.className="grid-item grid-item--height";break;default:n.className="grid-item"}return r=document.createElement("IMG"),r.src=e.imgSmall,r.alt="Image "+e.id,r.setAttribute("data-id",e.id),n.appendChild(r),o=document.createElement("DIV"),o.className="hover-box",o.appendChild(t("sprite-comment",e.comments.length)),o.appendChild(t("sprite-like",e.likes)),o.appendChild(t("sprite-dislike",e.dislikes)),n.appendChild(o),c.insertBefore(n,c.lastElementChild),s.reloadItems(),s.layout(),u.adjustSize(),n}function i(e,t,n){this.text=e,this.nickname=t,this.date=a(new Date(n))}function a(e){var t=e.getMinutes();t=t<10?"0"+t:t;var n=e.getHours(),r=n>12?"PM":"AM";n=n>12?n-12:n;var o=864e5,i=void 0,a=void 0,l=void 0,c=void 0,s=new Date;if(a=Math.round((s-e)/o),c=s.getFullYear()-e.getFullYear(),a>365){var u=1==c?" year":" years";i=c+u+" ago"}else if(a>31){l=s.getMonth()-e.getMonth(),c&&(l+=12);var d=1==l?" month":" months";i=l+d+" ago"}else i=a>1?a+" days ago":1==a?"Yesterday":"Today";return i+" "+n+":"+t+" "+r}var l=e("./scrollbar.es6.js"),c=document.querySelector(".grid"),s=new Packery(c,{itemSelector:".grid-item",gutter:10,horizontal:!0}),u=new l(document.querySelector("section + div>.scroll-bar"),"h");u.adjustSize();var d=new l(document.querySelector(".popup.big-img .scroll-bar"),"v");n.prototype.evaluate=function(e,t,n,r){var o=this.getImagePost(e),i=document.querySelector('[data-id="'+e+'"]'),a=t?"like":"dislike",l=i.nextElementSibling.querySelector(".sprite-"+a),c=void 0;o.myEvaluation=a,c=n?++o[a+"s"]:--o[a+"s"],l.setAttribute("data-count",c),r.firstElementChild.setAttribute("data-count",c)},n.prototype.addComment=function(e,t){var n=this.getImagePost(e);n.comments.unshift(new i(t.text,t.nickname,t.date)),n.showComments(e)},r.prototype.showComments=function(){var e=document.querySelector(".comments");return function(t){e.innerHTML="",this.comments.forEach(function(t){t.putOnPage(e)}),d.adjustSize(!0),document.querySelector(".popup-comments h2 span").textContent=this.comments.length,t&&this.node.querySelector(".sprite-comment").setAttribute("data-count",this.comments.length)}}(),i.prototype.putOnPage=function(e){function t(e,t){var n=document.createElement("SPAN");return n.className=e,n.textContent=t,n}var n=document.createElement("DIV");n.className="comment",n.appendChild(t("nickname",this.nickname)),n.appendChild(t("date",this.date));var r=document.createElement("DIV");r.className="comment-text",r.appendChild(t("",this.text)),n.appendChild(r),e.appendChild(n)},t.exports=n}()},{"./scrollbar.es6.js":3}],3:[function(e,t,n){!function(){t.exports=function(e,t){var n=this,r=e.parentNode,o=document.querySelector(r.getAttribute("data-scrolled-area")),i=o.parentNode,a="h"==t?["clientWidth","width","marginLeft","clientX","scrollLeft"]:["clientHeight","height","marginTop","clientY","scrollTop"],l=_slicedToArray(a,5),c=l[0],s=l[1],u=l[2],d=l[3],m=l[4],p=function(){var e=o[c],t=i[c];return e>t?t/e*100+"%":"100%"};this.adjustSize=function(t){var o=p();t&&n.jumpTo(0),"100%"==o?(r.style.opacity=0,i.removeEventListener("wheel",v)):(r.style.opacity=1,e.style[s]=o,i.addEventListener("wheel",v))};var v=function(e){console.log("wheel"),e.preventDefault()},f=function(){function t(){return l<=0}function r(){return p.scrollBarSize+l>=s}function o(){return t()?(e.style[u]=l=0,void(i[m]=0)):(r()&&(l=s-p.scrollBarSize),p.currentTarget.style[u]=l+"px",void(i[m]=l/s*p.scrollAreaSize))}var a=null,l=parseFloat(window.getComputedStyle(e)[u]),s=e.parentNode[c];n.jumpTo=function(t){l=t,e.style[u]=t,i[m]=t};var p=function e(t){var n=void 0,r=e.currentTarget;e.scrollBarSize;return s||(s=r.parentNode[c]),null===a?void(a=t[d]):(n=t[d]-a,a=t[d],l+=n,void o(l))},v=function(){window.removeEventListener("mousemove",p),a=null};return window.addEventListener("mouseup",v),window.addEventListener("blur",v),p}();e.addEventListener("mousedown",function(e){f.currentTarget=e.target,f.scrollBarSize=e.target[c],f.scrollAreaSize=o[c],window.addEventListener("mousemove",f)})}}()},{}]},{},[1]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uZXM2LmpzIl0sIm5hbWVzIjpbImUiLCJ0IiwibiIsInIiLCJzIiwibyIsInUiLCJhIiwicmVxdWlyZSIsImkiLCJFcnJvciIsImYiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJnZXREYXRhIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJkYXRhIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlIiwiYWxlcnQiLCJpbWFnZUNvbGxlY3Rpb24iLCJJbWFnZUNvbGxlY3Rpb24iLCJvcGVuIiwic2VuZCIsImZhZGVQb3B1cCIsImRpcmVjdGlvbiIsIm5vZGUiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJwYXJzZUZsb2F0Iiwid2luZG93IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInN0eWxlIiwiZGlzcGxheSIsIm9wYWNpdHkiLCJzZXRUaW1lb3V0IiwiaGFzQ2xhc3MiLCJlbGVtIiwiY2xhc3NOYW1lIiwiY2xhc3NlcyIsInNwbGl0IiwiaW5kZXhPZiIsInJlbW92ZUNsYXNzIiwiaW5kZXgiLCJzcGxpY2UiLCJqb2luIiwiYWRkQ2xhc3MiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbnB1dEhhbmRsZXIiLCJuaWNrbmFtZSIsImlucHV0cyIsIm5pY2tuYW1lTm9kZSIsImNvbW1lbnQiLCJjb21tZW50Tm9kZSIsInRndCIsInRhcmdldCIsImJ1dHRvbiIsInZhbHVlIiwiYm9yZGVyQ29sb3IiLCJjdXJzb3IiLCJmaWxlSGFuZGxlciIsIm9yaWVudGF0aW9uUG9wdXAiLCJxdWVyeVNlbGVjdG9yIiwiZmlsZSIsImZpbGVzIiwiaW1nVHlwZVBhdHRlcm4iLCJyZWFkZXIiLCJ0ZXN0IiwidHlwZSIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJpbWdzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpbWciLCJzcmMiLCJyZXN1bHQiLCJyZWFkQXNEYXRhVVJMIiwiZ2V0RWxlbWVudEJ5SWQiLCJuaWNrbmFtZUxhYmVsIiwiY29tbWVudExhYmVsIiwicGxhY2Vob2xkZXJzIiwiZ2V0QXR0cmlidXRlIiwiY2xlYXJJbnB1dHMiLCJ0aGlzIiwic2V0QXR0cmlidXRlIiwiYmx1ckhhbmRsZXIiLCJ0YWdOYW1lIiwibGFiZWwiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJjb2xvciIsImlkIiwiY2xpY2tMaXN0ZW5lciIsInNob3dCaWdJbWdQb3B1cCIsImltZ1Bvc3QiLCJnZXRJbWFnZVBvc3QiLCJpbWdCaWciLCJiYWNrZ3JvdW5kSW1hZ2UiLCJsaWtlSWNvbiIsImxpa2VzIiwiZGlzbGlrZUljb24iLCJkaXNsaWtlcyIsIm15RXZhbHVhdGlvbiIsInBhcmVudE5vZGUiLCJiaWdJbWdQb3B1cCIsInNob3dDb21tZW50cyIsImN1cnJlbnRJZCIsImNyZWF0ZU5ld0ltZ1Bvc3QiLCJvcmllbnRhdGlvbiIsImFkZEltYWdlUG9zdCIsImhhbmRsZUJpZ0ltZ0J1dHRvbnMiLCJvdGhlckNsaWNrZWRCdXR0b24iLCJpc0xpa2UiLCJldmFsdWF0ZSIsImFkZENvbW1lbnQiLCJ0ZXh0IiwiZGF0ZSIsIkRhdGUiLCJjbGVhclBvcHVwIiwiY2xpY2tlZEJ1dHRvbiIsImZpcnN0RWxlbWVudENoaWxkIiwicHJldmVudERlZmF1bHQiLCJib2R5IiwiLi9tb2R1bGVzL2ltYWdlLWNvbGxlY3Rpb24uZXM2LmpzIiwiLi9tb2R1bGVzL3Njcm9sbGJhci5lczYuanMiLCIyIiwiZ2V0TGFzdElkIiwiY29sbGVjdGlvbiIsImxhc3RJZCIsInB1c2giLCJJbWFnZVBvc3QiLCJjb25zb2xlIiwibG9nIiwiaW1nSW5mb09iaiIsImltYWdlUG9zdCIsIl90aGlzIiwiaW1nU21hbGwiLCJjb21tZW50cyIsInNvcnQiLCJiIiwiQ29tbWVudCIsInB1dEluR3JpZCIsInNlbGYiLCJhZGRJY29uIiwiZGF0YUNvdW50IiwiaWNvbiIsImNyZWF0ZUVsZW1lbnQiLCJncmlkSXRlbSIsImhvdmVyQm94IiwiYWx0IiwiYXBwZW5kQ2hpbGQiLCJncmlkIiwiaW5zZXJ0QmVmb3JlIiwibGFzdEVsZW1lbnRDaGlsZCIsInBja3J5IiwicmVsb2FkSXRlbXMiLCJsYXlvdXQiLCJzY3JvbGxYIiwiYWRqdXN0U2l6ZSIsInBhcnNlRGF0ZSIsIm1pbnV0ZXMiLCJnZXRNaW51dGVzIiwiaG91cnMiLCJnZXRIb3VycyIsImRheVBhcnQiLCJvbmVEYXkiLCJkaWZmIiwiZGlmZkRheXMiLCJkaWZmTW9udGgiLCJkaWZmWWVhciIsIm5vdyIsIk1hdGgiLCJyb3VuZCIsImdldEZ1bGxZZWFyIiwieWVhciIsImdldE1vbnRoIiwibW9udGgiLCJTY3JvbGxiYXIiLCJQYWNrZXJ5IiwiaXRlbVNlbGVjdG9yIiwiZ3V0dGVyIiwiaG9yaXpvbnRhbCIsInNjcm9sbFkiLCJwcm90b3R5cGUiLCJpc1BsdXMiLCJldmFsdWF0aW9uIiwiaWNvblNtYWxsIiwiY3VycmVudFZhbHVlIiwicG9zdCIsInVuc2hpZnQiLCJjb21tZW50c0RpdiIsImlubmVySFRNTCIsInB1dE9uUGFnZSIsInRleHRDb250ZW50IiwiY3JlYXRlU3BhbiIsInNwYW4iLCIuL3Njcm9sbGJhci5lczYuanMiLCIzIiwic2Nyb2xsQmFyIiwiX3RoaXMyIiwic2Nyb2xsQm94Iiwic2Nyb2xsZWRBcmVhIiwic2Nyb2xsZWRCb3giLCJfcmVmIiwiX3JlZjIiLCJfc2xpY2VkVG9BcnJheSIsImNsaWVudFNpemVQcm9wIiwic2l6ZVByb3AiLCJtYXJnaW5Qcm9wIiwiY2xpZW50QXhpcyIsInNjcm9sbFByb3AiLCJnZXRBcmVhVG9Cb3hSYXRpbyIsImFyZWFTaXplIiwiYm94U2l6ZSIsInRvSW5pdGlhbCIsInJhdGlvIiwianVtcFRvIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uV2hlZWwiLCJvbk1vdmUiLCJpc09uQmVnaW4iLCJtYXJnaW4iLCJpc09uRW5kIiwic2Nyb2xsQmFyU2l6ZSIsInNjcm9sbEJveFNpemUiLCJzY3JvbGxUbyIsImN1cnJlbnRUYXJnZXQiLCJzY3JvbGxBcmVhU2l6ZSIsImxhc3RNb3VzZVBvaW50IiwicG9pbnQiLCJyZW1vdmVTY3JvbGxMaXN0ZW5lcnMiXSwibWFwcGluZ3MiOiJxY0FBQSxRQUFVQSxHQUFFQyxFQUFFQyxFQUFFQyxHQUFHLFFBQVNDLEdBQUVDLEVBQUVDLEdBQUcsSUFBSUosRUFBRUcsR0FBRyxDQUFDLElBQUlKLEVBQUVJLEdBQUcsQ0FBQyxHQUFJRSxHQUFrQixrQkFBVEMsVUFBcUJBLE9BQVEsS0FBSUYsR0FBR0MsRUFBRSxNQUFPQSxHQUFFRixHQUFFLEVBQUksSUFBR0ksRUFBRSxNQUFPQSxHQUFFSixHQUFFLEVBQUksTUFBTSxJQUFJSyxPQUFNLHVCQUF1QkwsRUFBRSxLQUFLLEdBQUlNLEdBQUVULEVBQUVHLElBQUlPLFdBQVlYLEdBQUVJLEdBQUcsR0FBR1EsS0FBS0YsRUFBRUMsUUFBUSxTQUFTWixHQUFHLEdBQUlFLEdBQUVELEVBQUVJLEdBQUcsR0FBR0wsRUFBRyxPQUFPSSxHQUFFRixFQUFFQSxFQUFFRixJQUFJVyxFQUFFQSxFQUFFQyxRQUFRWixFQUFFQyxFQUFFQyxFQUFFQyxHQUFHLE1BQU9ELEdBQUVHLEdBQUdPLFFBQWtELElBQUksR0FBMUNILEdBQWtCLGtCQUFURCxVQUFxQkEsUUFBZ0JILEVBQUUsRUFBRUEsRUFBRUYsRUFBRVcsT0FBT1QsSUFBSUQsRUFBRUQsRUFBRUUsR0FBSSxPQUFPRCxLQUFLVyxHQUFHLFNBQVNQLEVBQVFRLEVBQU9KLElBRXJiLFdBVUEsUUFBU0ssS0FDUCxHQUFJQyxHQUFNLEdBQUlDLGdCQUFrQkMsRUFBQUEsTUFDaENGLEdBQUlHLG1CQUFxQixXQUV2QixHQUFzQixHQUFsQkgsRUFBSUksWUFBaUMsS0FBZEosRUFBSUssT0FBZSxDQUM1QyxJQUNFSCxFQUFPSSxLQUFLQyxNQUFNUCxFQUFJUSxVQUN0QixNQUFPMUIsR0FDUDJCLE1BQU0sbUNBRVJDLEVBQWtCLEdBQUlDLEdBQWdCVCxLQUkxQ0YsRUFBSVksS0FBSyxNQUFPLHlCQUNoQlosRUFBSWEsT0Fz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RUFBU0csRUFBZ0JMLEVBQU9RLGlCQW5DNUQsR0FBSUMsR0FBaUIsS0FDakJQLEVBQVNqTSxXQUFXQyxPQUNYQyxpQkFBaUJ3SyxHQUFXVSxJQUNyQ2dCLEVBQWdCMUIsRUFBVS9GLFdBQVd1RyxFQUd6Q1AsR0FBS2lCLE9BQVMsU0FBQ2EsR0FDYlIsRUFBU1EsRUFDVC9CLEVBQVV2SyxNQUFNaUwsR0FBY3FCLEVBQzlCM0IsRUFBWVEsR0FBY21CLEVBOEI1QixJQUFJVixHQUFTLFFBQVRBLEdBQVVuTyxHQUNaLEdBQUk4SyxHQUFBQSxPQUNBZ0MsRUFBWXFCLEVBQU9PLGFBQ0hQLEdBQU9JLGFBSzNCLE9BSEtDLEtBQWVBLEVBQWdCMUIsRUFBVS9GLFdBQVd1RyxJQUdsQyxPQUFuQnNCLE9BQ0ZBLEVBQWlCNU8sRUFBRXlOLEtBSXJCM0MsRUFBTzlLLEVBQUV5TixHQUFjbUIsRUFDdkJBLEVBQWlCNU8sRUFBRXlOLEdBRW5CWSxHQUFVdkQsTUFDVjJELEdBQVNKLEtBSVBTLEVBQXdCLFdBQzFCek0sT0FBTzRMLG9CQUFvQixZQUFhRSxHQUN4Q1MsRUFBaUIsS0FNbkIsT0FIQXZNLFFBQU9rQixpQkFBaUIsVUFBV3VMLEdBQ25Dek0sT0FBT2tCLGlCQUFpQixPQUFRdUwsR0FFekJYLElBR1RyQixHQUFVdkosaUJBQWlCLFlBQWEsU0FBQ3ZELEdBRXZDbU8sRUFBT08sY0FBZ0IxTyxFQUFFK0QsT0FJekJvSyxFQUFPSSxjQUFnQnZPLEVBQUUrRCxPQUFPdUosR0FDaENhLEVBQU9RLGVBQWlCMUIsRUFBYUssR0FFckNqTCxPQUFPa0IsaUJBQWlCLFlBQWE0SyxtQkFPOUIiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLy8gVE9ETzogYWRkIHBvcHVwIFwib25ibHVyXCJcclxuKCgpID0+IHtcclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgU2Nyb2xsYmFyID0gcmVxdWlyZSgnLi9tb2R1bGVzL3Njcm9sbGJhci5lczYuanMnKTtcclxuY29uc3QgSW1hZ2VDb2xsZWN0aW9uID0gcmVxdWlyZSgnLi9tb2R1bGVzL2ltYWdlLWNvbGxlY3Rpb24uZXM2LmpzJyk7XHJcblxyXG4vLyBBTEwgVEhFIElORk9STUFUSU9OIEFCT1VUIElNQUdFUywgSU5DTFVESU5HIENPTU1FTlRTXHJcbmxldCBpbWFnZUNvbGxlY3Rpb24gPSB7fTtcclxuZ2V0RGF0YSgpO1xyXG5cclxuZnVuY3Rpb24gZ2V0RGF0YSgpIHtcclxuICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksIGRhdGE7XHJcbiAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcclxuXHJcbiAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCAmJiB4aHIuc3RhdHVzID09IDIwMCkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZSk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBhbGVydCgnSW52YWxpZCBTZXJ2ZXIgcmVzcG9uc2UuIFNvcnJ5IScpO1xyXG4gICAgICB9XHJcbiAgICAgIGltYWdlQ29sbGVjdGlvbiA9IG5ldyBJbWFnZUNvbGxlY3Rpb24oZGF0YSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgeGhyLm9wZW4oJ0dFVCcsICdkYXRhL2ltYWdlX3Bvc3RzLmpzb24nKTtcclxuICB4aHIuc2VuZCgpO1xyXG59XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xyXG4gIC8vVE9ETzogYWRkIGxvYWRlciBpbnRvIGdyaWQgY29zIGltYWdlcyBsb2FkaW5nIGNhbiB0YWtlIGEgd2hpbGVcclxuXHJcbiAgLy8gQURESU5HIE5FVyBJTUFHRVxyXG4gIGxldCBmaWxlSGFuZGxlciA9ICgoKSA9PiB7XHJcbiAgICBsZXQgb3JpZW50YXRpb25Qb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC5vcmllbnRhdGlvbi1jaG9zZScpO1xyXG5cclxuICAgIHJldHVybiAoZSkgPT4ge1xyXG4gICAgICBsZXQgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdLFxyXG4gICAgICAgICAgaW1nVHlwZVBhdHRlcm4gPSAvXmltYWdlXFwvLyxcclxuICAgICAgICAgIHJlYWRlcjtcclxuXHJcbiAgICAgIC8vIHVzciBkaWRuJ3QgdXBsb2FkIGFueXRoaW5nXHJcbiAgICAgIGlmICghZmlsZSkgcmV0dXJuO1xyXG5cclxuICAgICAgLy8gaWYgbm90IG9mIHR5cGUgaW1hZ2VcclxuICAgICAgaWYgKCFpbWdUeXBlUGF0dGVybi50ZXN0KGZpbGUudHlwZSkpIHtcclxuICAgICAgICBhbGVydCgnWW91IG11c3QgdXBsb2FkIGFuIGltYWdlIScpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuXHJcbiAgICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4ge1xyXG4gICAgICAgIGxldCBpbWdzID0gb3JpZW50YXRpb25Qb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKTtcclxuICAgICAgICBbXS5mb3JFYWNoLmNhbGwoaW1ncywgKGltZykgPT4ge1xyXG4gICAgICAgICAgaW1nLnNyYyA9IGUudGFyZ2V0LnJlc3VsdDtcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZhZGVQb3B1cCgnaW4nLCBvcmllbnRhdGlvblBvcHVwKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xyXG4gICAgfTtcclxuICB9KSgpO1xyXG5cclxuXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImZpbGVcIl0nKVxyXG4gIC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmaWxlSGFuZGxlcik7XHJcblxyXG4gIC8vIEZPUk0gVkFMSURBVElPTi5cclxuICAvLyBJdCdzIGN1c3RvbSB2YWxpZGF0aW9uIHRvIGdldCB3aWRlciBzdXBwb3J0IGluIHN0eWxpbmcgcGxhY2Vob2xkZXJzXHJcbiAgbGV0IGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1jb21tZW50cycpO1xyXG4gIGlucHV0cy5uaWNrbmFtZU5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmlja25hbWUnKTtcclxuICBpbnB1dHMuY29tbWVudE5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tbWVudCcpO1xyXG4gIGlucHV0cy5uaWNrbmFtZUxhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2Zvcj1cIm5pY2tuYW1lXCJdJyk7XHJcbiAgaW5wdXRzLmNvbW1lbnRMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tmb3I9XCJjb21tZW50XCJdJyk7XHJcbiAgaW5wdXRzLnBsYWNlaG9sZGVycyA9IHtcclxuICAgIG5pY2tuYW1lOiBpbnB1dHMubmlja25hbWVMYWJlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGxhY2Vob2xkZXInKSxcclxuICAgIGNvbW1lbnQ6IGlucHV0cy5jb21tZW50TGFiZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXBsYWNlaG9sZGVyJylcclxuICB9O1xyXG4gIGlucHV0cy5idXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VuZC1idXR0b24nKTtcclxuICBpbnB1dHMuY2xlYXJJbnB1dHMgPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMubmlja25hbWVOb2RlLnZhbHVlID0gdGhpcy5jb21tZW50Tm9kZS52YWx1ZSA9ICcnO1xyXG4gICAgdGhpcy5uaWNrbmFtZUxhYmVsLnNldEF0dHJpYnV0ZSgnZGF0YS1wbGFjZWhvbGRlcicsIHRoaXMucGxhY2Vob2xkZXJzLm5pY2tuYW1lKTtcclxuICAgIHRoaXMuY29tbWVudExhYmVsLnNldEF0dHJpYnV0ZSgnZGF0YS1wbGFjZWhvbGRlcicsIHRoaXMucGxhY2Vob2xkZXJzLmNvbW1lbnQpO1xyXG4gICAgdGhpcy5idXR0b24uc3R5bGUuY3Vyc29yID0gJ25vdC1hbGxvd2VkJztcclxuICB9O1xyXG5cclxuXHJcbiAgbGV0IGJsdXJIYW5kbGVyID0gKCgpID0+IHtcclxuICAgIGxldCBwbGFjZWhvbGRlcnMgPSBpbnB1dHMucGxhY2Vob2xkZXJzO1xyXG5cclxuICAgIHJldHVybiAoZSkgPT4ge1xyXG4gICAgICBsZXQgdGd0ID0gZS50YXJnZXQ7XHJcbiAgICAgIGlmICh0Z3QudGFnTmFtZSAhPT0gJ0lOUFVUJykgcmV0dXJuO1xyXG4gICAgICBsZXQgbGFiZWwgPSB0Z3QubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cclxuICAgICAgaWYgKCF0Z3QudmFsdWUpIHtcclxuICAgICAgICB0Z3Quc3R5bGUuYm9yZGVyQ29sb3IgPSAncmVkJztcclxuICAgICAgICBsYWJlbC5zdHlsZS5jb2xvciA9ICdyZWQnO1xyXG4gICAgICAgIC8vIGFkZCBwbGFjZWhvbGRlclxyXG4gICAgICAgIGxhYmVsLnNldEF0dHJpYnV0ZSgnZGF0YS1wbGFjZWhvbGRlcicsIHBsYWNlaG9sZGVyc1t0Z3QuaWRdKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0Z3Quc3R5bGUuYm9yZGVyQ29sb3IgPSAnJztcclxuICAgICAgICAvLyBkZWxldGUgcGxhY2Vob2xkZXJcclxuICAgICAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGxhY2Vob2xkZXInLCAnJyk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfSkoKTtcclxuXHJcbiAgaW5wdXRzLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBibHVySGFuZGxlciwgdHJ1ZSk7XHJcblxyXG4gIGZ1bmN0aW9uIGlucHV0SGFuZGxlcihlKSB7XHJcbiAgICBsZXQgbmlja25hbWUgPSBpbnB1dHMubmlja25hbWVOb2RlO1xyXG4gICAgbGV0IGNvbW1lbnQgPSBpbnB1dHMuY29tbWVudE5vZGU7XHJcbiAgICBsZXQgdGd0ID0gZS50YXJnZXQ7XHJcbiAgICBsZXQgYnV0dG9uID0gaW5wdXRzLmJ1dHRvbjtcclxuXHJcbiAgICBpZiAodGd0LnZhbHVlKSB7XHJcbiAgICAgIHRndC5zdHlsZS5ib3JkZXJDb2xvciA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGd0LnZhbHVlKSB7XHJcbiAgICAgIGJ1dHRvbi5zdHlsZS5jdXJzb3IgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICBpZiAobmlja25hbWUudmFsdWUgJiYgY29tbWVudC52YWx1ZSkge1xyXG4gICAgICBidXR0b24uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaW5wdXRzLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgaW5wdXRIYW5kbGVyKTtcclxuXHJcblxyXG4gIC8vIEdSSUQgTElTVEVORVJTIC0+IFBPUFVQICYmIEFERCBORVcgSU1BR0VcclxuICBsZXQgY2xpY2tMaXN0ZW5lciA9ICgoKSA9PiB7XHJcbiAgICAvL2Nsb3N1cmVcclxuICAgIGxldCBiaWdJbWdQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC5iaWctaW1nJyk7XHJcbiAgICBsZXQgaW1nQmlnID0gYmlnSW1nUG9wdXAucXVlcnlTZWxlY3RvcignLmltYWdlLWJpZycpO1xyXG4gICAgbGV0IGxpa2VJY29uID0gYmlnSW1nUG9wdXAucXVlcnlTZWxlY3RvcignLnNwcml0ZS1saWtlJyk7XHJcbiAgICBsZXQgZGlzbGlrZUljb24gPSBiaWdJbWdQb3B1cC5xdWVyeVNlbGVjdG9yKCcuc3ByaXRlLWRpc2xpa2UnKTtcclxuICAgIGxldCBjb21tZW50c051bWJlciA9IGJpZ0ltZ1BvcHVwLnF1ZXJ5U2VsZWN0b3IoJ2gyIHNwYW4nKTtcclxuICAgIGxldCBvcmllbnRhdGlvblBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLm9yaWVudGF0aW9uLWNob3NlJyk7XHJcbiAgICBsZXQgb3JpZW50YXRpb247XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd0JpZ0ltZ1BvcHVwKHRhcmdldCkge1xyXG4gICAgICBsZXQgaWQgPSArdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xyXG4gICAgICBsZXQgaW1nUG9zdCA9IGltYWdlQ29sbGVjdGlvbi5nZXRJbWFnZVBvc3QoaWQpO1xyXG5cclxuICAgICAgaW1nQmlnLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIGltZ1Bvc3QuaW1nQmlnICsgJyknO1xyXG4gICAgICBsaWtlSWNvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtY291bnQnLCBpbWdQb3N0Lmxpa2VzKTtcclxuICAgICAgZGlzbGlrZUljb24uc2V0QXR0cmlidXRlKCdkYXRhLWNvdW50JywgaW1nUG9zdC5kaXNsaWtlcyk7XHJcbiAgICAgIC8vIGlmIDEgb2YgYnR0b24gd2FzIHByZXNzZWQgYnkgdXNlciBpdCBzaG91bGQgcmVtYWluIHByZXNzZWRcclxuICAgICAgaWYgKGltZ1Bvc3QubXlFdmFsdWF0aW9uID09ICdsaWtlJykge1xyXG4gICAgICAgIGFkZENsYXNzKGxpa2VJY29uLnBhcmVudE5vZGUsICdjbGlja2VkJyk7XHJcbiAgICAgIH0gZWxzZSBpZiAoaW1nUG9zdC5teUV2YWx1YXRpb24gPT0gJ2Rpc2xpa2UnKSB7XHJcbiAgICAgICAgYWRkQ2xhc3MoZGlzbGlrZUljb24ucGFyZW50Tm9kZSwgJ2NsaWNrZWQnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZmFkZVBvcHVwKCdpbicsIGJpZ0ltZ1BvcHVwKTtcclxuICAgICAgaW1nUG9zdC5zaG93Q29tbWVudHMoaWQpO1xyXG5cclxuICAgICAgLy8gcmVtZW1iZXIgaWQgb2YgdGhlIGN1cnJlbnQgaW1hZ2VcclxuICAgICAgYmlnSW1nUG9wdXAuY3VycmVudElkID0gaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlTmV3SW1nUG9zdChpbWdCaWcsIG9yaWVudGF0aW9uKSB7XHJcbiAgICAgIGltYWdlQ29sbGVjdGlvbi5hZGRJbWFnZVBvc3Qoe2ltZ0JpZywgb3JpZW50YXRpb259KTtcclxuICAgICAgZmFkZVBvcHVwKCdvdXQnLCBvcmllbnRhdGlvblBvcHVwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyB0Z3QgLT4gY2xpY2sgdGFyZ2V0XHJcbiAgICBmdW5jdGlvbiBoYW5kbGVCaWdJbWdCdXR0b25zKHRndCkge1xyXG4gICAgLy8gaWYgY2xpY2sgb24gY2hpbGQgbm9kZVxyXG4gICAgICBpZiAodGd0LnRhZ05hbWUgPT09ICdJJykgdGd0ID0gdGd0LnBhcmVudE5vZGU7XHJcblxyXG4gICAgICBpZiAoaGFzQ2xhc3ModGd0LCAnY2xpY2tlZCcpKSByZXR1cm47XHJcbiAgICAvLyBpZiB0aGVyZSBpcyBhbHJlYWR5IGEgY2xpY2tlZCBidXR0b24gLT4gdW5jbGljayBpdFxyXG4gICAgICBsZXQgb3RoZXJDbGlja2VkQnV0dG9uID0gYmlnSW1nUG9wdXAucXVlcnlTZWxlY3RvcignLmltYWdlLWJ1dHRvbi5jbGlja2VkJyk7XHJcbiAgICAgIGxldCBpc0xpa2UgPSBoYXNDbGFzcyh0Z3QsICdsaWtlJyk7XHJcblxyXG4gICAgICBpZiAob3RoZXJDbGlja2VkQnV0dG9uKSB7XHJcbiAgICAgICAgLy8gLTEgZm9yIGxpa2VzIG9yIGRpc2xpa2VzXHJcbiAgICAgICAgcmVtb3ZlQ2xhc3Mob3RoZXJDbGlja2VkQnV0dG9uLCAnY2xpY2tlZCcpO1xyXG4gICAgICAgIGltYWdlQ29sbGVjdGlvbi5ldmFsdWF0ZShiaWdJbWdQb3B1cC5jdXJyZW50SWQsICFpc0xpa2UsIGZhbHNlLCBvdGhlckNsaWNrZWRCdXR0b24pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBcInByZXNzXCIgdGhlIGJ1dHRvblxyXG4gICAgICBhZGRDbGFzcyh0Z3QsICdjbGlja2VkJyk7XHJcbiAgICAgIC8vICsxIGZvciBsaWtlcyBvciBkaXNsaWtlc1xyXG4gICAgICBpbWFnZUNvbGxlY3Rpb24uZXZhbHVhdGUoYmlnSW1nUG9wdXAuY3VycmVudElkLCBpc0xpa2UsIHRydWUsIHRndCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkQ29tbWVudCgpIHtcclxuICAgICAgbGV0IG5pY2tuYW1lID0gaW5wdXRzLm5pY2tuYW1lTm9kZS52YWx1ZTtcclxuICAgICAgbGV0IHRleHQgPSBpbnB1dHMuY29tbWVudE5vZGUudmFsdWU7XHJcbiAgICAgIGlmICghbmlja25hbWUgfHwgIXRleHQpIHJldHVybjtcclxuXHJcbiAgICAgIC8vY2xlYXIgaW5wdXRzXHJcbiAgICAgIGlucHV0cy5uaWNrbmFtZU5vZGUudmFsdWUgPSBpbnB1dHMuY29tbWVudE5vZGUudmFsdWUgPSAnJztcclxuICAgICAgaW5wdXRzLmNsZWFySW5wdXRzKCk7XHJcblxyXG4gICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgIGltYWdlQ29sbGVjdGlvbi5hZGRDb21tZW50KGJpZ0ltZ1BvcHVwLmN1cnJlbnRJZCwge1xyXG4gICAgICAgIHRleHQsXHJcbiAgICAgICAgbmlja25hbWUsXHJcbiAgICAgICAgZGF0ZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjbGVhclBvcHVwKCkge1xyXG4gICAgICAvLyB1bmNsaWNrIGxpa2UgYnV0dG9uc1xyXG4gICAgICBsZXQgY2xpY2tlZEJ1dHRvbiA9IGJpZ0ltZ1BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5jbGlja2VkJyk7XHJcbiAgICAgIGlmIChjbGlja2VkQnV0dG9uKSByZW1vdmVDbGFzcyhjbGlja2VkQnV0dG9uLCAnY2xpY2tlZCcpO1xyXG5cclxuICAgICAgLy8gcmVtb3ZlIGN1cnJlbnQgaW5wdXQgdmFsdWVzIGFuZCBzdHlsaW5nXHJcbiAgICAgIGxldCBuaWNrbmFtZSA9IGlucHV0cy5uaWNrbmFtZU5vZGU7XHJcbiAgICAgIGxldCBjb21tZW50ID0gaW5wdXRzLmNvbW1lbnROb2RlO1xyXG4gICAgICBsZXQgbmlja25hbWVMYWJlbCA9IGlucHV0cy5uaWNrbmFtZUxhYmVsO1xyXG4gICAgICBsZXQgY29tbWVudExhYmVsID0gaW5wdXRzLmNvbW1lbnRMYWJlbDtcclxuXHJcbiAgICAgIG5pY2tuYW1lLnZhbHVlID0gY29tbWVudC52YWx1ZSA9ICcnO1xyXG4gICAgICBuaWNrbmFtZS5zdHlsZS5ib3JkZXJDb2xvciA9XHJcbiAgICAgIGNvbW1lbnQuc3R5bGUuYm9yZGVyQ29sb3IgPSAnJztcclxuICAgICAgbmlja25hbWVMYWJlbC5zdHlsZS5jb2xvciA9IGNvbW1lbnRMYWJlbC5zdHlsZS5jb2xvciA9ICcnO1xyXG4gICAgICBpbnB1dHMuYnV0dG9uLnN0eWxlLmN1cnNvciA9ICcnO1xyXG5cclxuICAgICAgLy8gYWRkIHBsYWNlaG9sZGVyc1xyXG4gICAgICBpbnB1dHMuY2xlYXJJbnB1dHMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBhY3R1YWwgbGlzdGVuZXJcclxuICAgIHJldHVybiAoZSkgPT4ge1xyXG4gICAgICBsZXQgdGFyZ2V0ID0gZS50YXJnZXQ7XHJcblxyXG4gICAgICAvLyBjbGljayBvbiBpbWFnZXMgb24gbWFpbiB3aW5kb3dcclxuICAgICAgaWYgKHRhcmdldC50YWdOYW1lID09PSAnSU1HJykge1xyXG4gICAgICAgIHNob3dCaWdJbWdQb3B1cCh0YXJnZXQpO1xyXG5cclxuICAgICAgLy8gY2xpY2sgb24gb3JpZW50YXRpb24gaW1hZ2VzIG9uIHBvcHVwXHJcbiAgICAgIH0gZWxzZSBpZiAob3JpZW50YXRpb24gPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLW9yaWVudGF0aW9uJykpIHtcclxuXHJcbiAgICAgICAgY3JlYXRlTmV3SW1nUG9zdCh0YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQuc3JjLCBvcmllbnRhdGlvbik7XHJcblxyXG4gICAgICAvLyAqKioqKioqKioqKioqIFBPUFVQICoqKioqKioqKioqKioqKioqXHJcbiAgICAgIC8vIExpa2UgYW5kIERpc2xpa2UgYnV0dG9uc1xyXG4gICAgICB9IGVsc2UgaWYgKGhhc0NsYXNzKHRhcmdldCwgJ2ltYWdlLWJ1dHRvbicpIHx8XHJcbiAgICAgICAgICAgICAgIGhhc0NsYXNzKHRhcmdldC5wYXJlbnROb2RlLCAnaW1hZ2UtYnV0dG9uJykpIHtcclxuXHJcbiAgICAgICAgaGFuZGxlQmlnSW1nQnV0dG9ucyh0YXJnZXQpO1xyXG5cclxuICAgICAgfSBlbHNlIGlmIChoYXNDbGFzcyh0YXJnZXQsICdzcHJpdGUtY2xvc2UnKSkge1xyXG4gICAgICAgIGNsZWFyUG9wdXAoKTtcclxuICAgICAgICBmYWRlUG9wdXAoJ291dCcsIGJpZ0ltZ1BvcHVwKTtcclxuXHJcblxyXG4gICAgICB9IGVsc2UgaWYgKGhhc0NsYXNzKHRhcmdldCwgJ3NlbmQtYnV0dG9uJykgfHxcclxuICAgICAgICAgICAgICAgaGFzQ2xhc3ModGFyZ2V0LnBhcmVudE5vZGUsICdzZW5kLWJ1dHRvbicpKSB7XHJcbiAgICAgICAgYWRkQ29tbWVudCgpO1xyXG4gICAgICAgIC8vdG8gcHJldmVudCBmb2N1c2luZyBpbnB1dFxyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9KSgpO1xyXG5cclxuICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tMaXN0ZW5lcik7XHJcblxyXG59KTsvL2VuZCBET01Db250ZW50TG9hZGVkXHJcblxyXG5cclxuLy8gVVNFRlVMIEZVTkNUSU9OU1xyXG5mdW5jdGlvbiBmYWRlUG9wdXAoZGlyZWN0aW9uLCBub2RlKSB7XHJcbiAgbGV0IHRyYW5zaXRpb25EdXJhdGlvbiA9IHBhcnNlRmxvYXQod2luZG93LmdldENvbXB1dGVkU3R5bGUobm9kZSkudHJhbnNpdGlvbkR1cmF0aW9uKSAqIDEwMDA7XHJcblxyXG4gIGlmIChkaXJlY3Rpb24gPT0gJ2luJykge1xyXG4gICAgbm9kZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgIG5vZGUuc3R5bGUub3BhY2l0eSA9IDA7XHJcblxyXG4gICAgLy8gdG8gZW5hYmxlIHByb3BlciB0cmFuc2l0aW9uaW5nIHdpdGggbWluaW1hbCBkZWxheVxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7IG5vZGUuc3R5bGUub3BhY2l0eSA9IDE7IH0sIDQpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBub2RlLnN0eWxlLm9wYWNpdHkgPSAwO1xyXG5cclxuICAgIC8vIHRyYW5zaXRpb25EdXJhdGlvblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7IG5vZGUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgfSwgdHJhbnNpdGlvbkR1cmF0aW9uKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhc0NsYXNzKGVsZW0sIGNsYXNzTmFtZSkge1xyXG4gIGxldCBjbGFzc2VzID0gZWxlbS5jbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuICByZXR1cm4gY2xhc3Nlcy5pbmRleE9mKGNsYXNzTmFtZSkgPiAtMTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWxlbSwgY2xhc3NOYW1lKSB7XHJcbiAgbGV0IGNsYXNzZXMgPSBlbGVtLmNsYXNzTmFtZS5zcGxpdCgnICcpO1xyXG4gIGxldCBpbmRleCA9IGNsYXNzZXMuaW5kZXhPZihjbGFzc05hbWUpO1xyXG4gIGlmIChpbmRleCA+IC0xKSBjbGFzc2VzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgZWxlbS5jbGFzc05hbWUgPSBjbGFzc2VzLmpvaW4oJyAnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkQ2xhc3MoZWxlbSwgY2xhc3NOYW1lKSB7XHJcbiAgaWYgKCFoYXNDbGFzcyhlbGVtLCBjbGFzc05hbWUpKVxyXG4gIGVsZW0uY2xhc3NOYW1lICs9ICcgJyArIGNsYXNzTmFtZTtcclxufVxyXG5cclxuXHJcbn0pKCk7XHJcblxyXG4vL1RPRE86IERPTSBlbGVtZW50cywgdGhhdCB1IG1hbmFnZSB0aHJvdWdoIEpTIG11c3QgaGF2ZSBkYXRhLVxyXG5cbn0se1wiLi9tb2R1bGVzL2ltYWdlLWNvbGxlY3Rpb24uZXM2LmpzXCI6MixcIi4vbW9kdWxlcy9zY3JvbGxiYXIuZXM2LmpzXCI6M31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uKCkge1xyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCBTY3JvbGxiYXIgPSByZXF1aXJlKCcuL3Njcm9sbGJhci5lczYuanMnKTtcclxuXHJcbmxldCBncmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdyaWQnKTtcclxuLy8gc2V0IGxheW91dCBvZiBpbWFnZXNcclxubGV0IHBja3J5ID0gbmV3IFBhY2tlcnkoZ3JpZCwge1xyXG4gIGl0ZW1TZWxlY3RvcjogJy5ncmlkLWl0ZW0nLFxyXG4gIGd1dHRlcjogMTAsXHJcbiAgaG9yaXpvbnRhbDogdHJ1ZVxyXG59KTtcclxuXHJcbmxldCBzY3JvbGxYID0gbmV3IFNjcm9sbGJhcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzZWN0aW9uICsgZGl2Pi5zY3JvbGwtYmFyJyksICdoJyk7XHJcbnNjcm9sbFguYWRqdXN0U2l6ZSgpO1xyXG5cclxubGV0IHNjcm9sbFkgPSBuZXcgU2Nyb2xsYmFyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC5iaWctaW1nIC5zY3JvbGwtYmFyJyksICd2Jyk7XHJcblxyXG5mdW5jdGlvbiBJbWFnZUNvbGxlY3Rpb24oZGF0YSkge1xyXG4gIGxldCBjb2xsZWN0aW9uID0gW107XHJcbiAgbGV0IGxhc3RJZCA9IGdldExhc3RJZChkYXRhKTtcclxuXHJcbiAgZnVuY3Rpb24gZ2V0TGFzdElkKGRhdGEpIHtcclxuICAgIGxldCBpZCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMCwgbiA9IGRhdGEubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgIGlkID0gKGRhdGFbaV0uaWQgPiBpZCkgPyBkYXRhW2ldLmlkIDogaWQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaWQ7XHJcbiAgfVxyXG5cclxuICBmb3IgKGxldCBpID0gMCwgbiA9IGRhdGEubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICBjb2xsZWN0aW9uLnB1c2gobmV3IEltYWdlUG9zdChkYXRhW2ldKSk7XHJcbiAgfVxyXG5cclxuICB0aGlzLmdldEltYWdlUG9zdCA9IChpZCkgPT4ge1xyXG4gICAgZm9yIChsZXQgaSA9IDAsIG4gPSBjb2xsZWN0aW9uLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICBpZiAoY29sbGVjdGlvbltpXS5pZCA9PT0gaWQpIHJldHVybiBjb2xsZWN0aW9uW2ldO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdObyBpbWFnZSBwb3N0IHdpdGggaWQ6JywgaWQpO1xyXG4gIH07XHJcblxyXG4gIHRoaXMuYWRkSW1hZ2VQb3N0ID0gKGltZ0luZm9PYmopID0+IHtcclxuICAgIGlmICghaW1nSW5mb09iai5pZCkgaW1nSW5mb09iai5pZCA9ICsrbGFzdElkO1xyXG4gICAgbGV0IGltYWdlUG9zdCA9IG5ldyBJbWFnZVBvc3QoaW1nSW5mb09iaik7XHJcbiAgICBjb2xsZWN0aW9uLnB1c2goaW1hZ2VQb3N0KTtcclxuICB9O1xyXG59XHJcblxyXG5JbWFnZUNvbGxlY3Rpb24ucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24oaWQsIGlzTGlrZSwgaXNQbHVzLCB0YXJnZXQpIHtcclxuICBsZXQgaW1nUG9zdCA9IHRoaXMuZ2V0SW1hZ2VQb3N0KGlkKTtcclxuICBsZXQgaW1nU21hbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1cIicgKyBpZCArICdcIl0nKTtcclxuICBsZXQgZXZhbHVhdGlvbiA9IGlzTGlrZSA/ICdsaWtlJyA6ICdkaXNsaWtlJztcclxuICBsZXQgaWNvblNtYWxsID0gaW1nU21hbGwubmV4dEVsZW1lbnRTaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoJy5zcHJpdGUtJyArIGV2YWx1YXRpb24pO1xyXG4gIGxldCBjdXJyZW50VmFsdWU7XHJcblxyXG4gIC8vIHJlbWVtYmVyIG15IGV2YWx1YXRpb25cclxuICBpbWdQb3N0Lm15RXZhbHVhdGlvbiA9IGV2YWx1YXRpb247XHJcblxyXG4gIC8vIHJlc3VsdHMgaW4gJ2xpa2VzJyB8fCAnZGlzbGlrZXMnXHJcbiAgaWYgKGlzUGx1cykgY3VycmVudFZhbHVlID0gKytpbWdQb3N0W2V2YWx1YXRpb24gKyAncyddO1xyXG4gIGVsc2UgY3VycmVudFZhbHVlID0gLS1pbWdQb3N0W2V2YWx1YXRpb24gKyAncyddO1xyXG5cclxuICBpY29uU21hbGwuc2V0QXR0cmlidXRlKCdkYXRhLWNvdW50JywgY3VycmVudFZhbHVlKTtcclxuICB0YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQuc2V0QXR0cmlidXRlKCdkYXRhLWNvdW50JywgY3VycmVudFZhbHVlKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZHMgY29tbWVudCB0byB0aGUgcG9zdCB3aXRoIHNldCBpZFxyXG4gKiBAcGFyYW0ge051bWJlcn1cclxuICogQHBhcmFtIHtPYmplY3R9IG9mIHR5cGUge3RleHQsIG5pY2tuYW1lLCBkYXRlfVxyXG4gKiBAcmV0dXJuc1xyXG4gKi9cclxuSW1hZ2VDb2xsZWN0aW9uLnByb3RvdHlwZS5hZGRDb21tZW50ID0gZnVuY3Rpb24oaWQsIGNvbW1lbnQpIHtcclxuICBsZXQgcG9zdCA9IHRoaXMuZ2V0SW1hZ2VQb3N0KGlkKTtcclxuICBwb3N0LmNvbW1lbnRzLnVuc2hpZnQobmV3IENvbW1lbnQoXHJcbiAgICBjb21tZW50LnRleHQsXHJcbiAgICBjb21tZW50Lm5pY2tuYW1lLFxyXG4gICAgY29tbWVudC5kYXRlXHJcbiAgKSk7XHJcbiAgcG9zdC5zaG93Q29tbWVudHMoaWQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBJbWFnZVBvc3QoZGF0YSkge1xyXG4gIHRoaXMuaWQgPSBkYXRhLmlkIHx8IG51bGw7XHJcbiAgdGhpcy5pbWdTbWFsbCA9IGRhdGEuaW1nU21hbGwgfHwgZGF0YS5pbWdCaWc7XHJcbiAgdGhpcy5pbWdCaWcgPSBkYXRhLmltZ0JpZztcclxuICB0aGlzLm9yaWVudGF0aW9uID0gZGF0YS5vcmllbnRhdGlvbiB8fCAnbm9ybWFsJztcclxuICB0aGlzLmxpa2VzID0gZGF0YS5saWtlcyB8fCAwO1xyXG4gIHRoaXMuZGlzbGlrZXMgPSBkYXRhLmRpc2xpa2VzIHx8IDA7XHJcbiAgdGhpcy5jb21tZW50cyA9IFtdO1xyXG4gIHRoaXMubXlFdmFsdWF0aW9uID0gbnVsbCAvLyBteSBcImxpa2VcIiB8fCBcImRpc2xpa2VcIlxyXG5cclxuICAvL3NvcnQgY29tbWVudHMgZHVlIHRvIGRhdGVcclxuICBkYXRhLmNvbW1lbnRzICYmIGRhdGEuY29tbWVudHMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgcmV0dXJuIGIuZGF0ZSAtIGEuZGF0ZTtcclxuICB9KTtcclxuXHJcbiAgZGF0YS5jb21tZW50cyAmJiBkYXRhLmNvbW1lbnRzLmZvckVhY2goKGNvbW1lbnQpID0+IHtcclxuICAgIHRoaXMuY29tbWVudHMucHVzaChuZXcgQ29tbWVudChcclxuICAgICAgY29tbWVudC50ZXh0LFxyXG4gICAgICBjb21tZW50Lm5pY2tuYW1lLFxyXG4gICAgICBjb21tZW50LmRhdGVcclxuICAgICkpO1xyXG4gIH0pO1xyXG5cclxuICB0aGlzLm5vZGUgPSBwdXRJbkdyaWQodGhpcyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHB1dEluR3JpZChzZWxmKSB7XHJcbiAgbGV0IGdyaWRJdGVtLCBpbWcsIGhvdmVyQm94LCBpY29uO1xyXG5cclxuICBmdW5jdGlvbiBhZGRJY29uKGNsYXNzTmFtZSwgZGF0YUNvdW50KSB7XHJcbiAgICBsZXQgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0knKTtcclxuICAgIGljb24uY2xhc3NOYW1lID0gJ3Nwcml0ZSAnICsgY2xhc3NOYW1lO1xyXG4gICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtY291bnQnLCBkYXRhQ291bnQpO1xyXG4gICAgcmV0dXJuIGljb247XHJcbiAgfVxyXG5cclxuICBncmlkSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xyXG5cclxuICBzd2l0Y2goc2VsZi5vcmllbnRhdGlvbikge1xyXG4gICAgY2FzZSAnbGFuZHNjYXBlJzpcclxuICAgIGdyaWRJdGVtLmNsYXNzTmFtZSA9ICdncmlkLWl0ZW0gZ3JpZC1pdGVtLS13aWR0aCc7XHJcbiAgICBicmVhaztcclxuXHJcbiAgICBjYXNlICdwb3J0cmFpdCc6XHJcbiAgICBncmlkSXRlbS5jbGFzc05hbWUgPSAnZ3JpZC1pdGVtIGdyaWQtaXRlbS0taGVpZ2h0JztcclxuICAgIGJyZWFrO1xyXG5cclxuICAgIGRlZmF1bHQ6XHJcbiAgICBncmlkSXRlbS5jbGFzc05hbWUgPSAnZ3JpZC1pdGVtJztcclxuICB9XHJcblxyXG4gIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0lNRycpO1xyXG4gIGltZy5zcmMgPSBzZWxmLmltZ1NtYWxsO1xyXG4gIGltZy5hbHQgPSAnSW1hZ2UgJyArIHNlbGYuaWQ7XHJcbiAgaW1nLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIHNlbGYuaWQpO1xyXG4gIGdyaWRJdGVtLmFwcGVuZENoaWxkKGltZyk7XHJcblxyXG4gIGhvdmVyQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XHJcbiAgaG92ZXJCb3guY2xhc3NOYW1lID0gJ2hvdmVyLWJveCc7XHJcblxyXG4gIGhvdmVyQm94LmFwcGVuZENoaWxkKGFkZEljb24oJ3Nwcml0ZS1jb21tZW50Jywgc2VsZi5jb21tZW50cy5sZW5ndGgpKTtcclxuICBob3ZlckJveC5hcHBlbmRDaGlsZChhZGRJY29uKCdzcHJpdGUtbGlrZScsIHNlbGYubGlrZXMpKTtcclxuICBob3ZlckJveC5hcHBlbmRDaGlsZChhZGRJY29uKCdzcHJpdGUtZGlzbGlrZScsIHNlbGYuZGlzbGlrZXMpKTtcclxuXHJcbiAgZ3JpZEl0ZW0uYXBwZW5kQ2hpbGQoaG92ZXJCb3gpO1xyXG5cclxuICAvLyBpbnNlcnQgYmVmb3JlIHBsYWNlaG9sZGVyIGZvciBhZGRpbmcgaW1hZ2VzXHJcbiAgZ3JpZC5pbnNlcnRCZWZvcmUoZ3JpZEl0ZW0sIGdyaWQubGFzdEVsZW1lbnRDaGlsZCk7XHJcblxyXG4gIC8vcmVkcmF3IFBhY2tlcnlcclxuICBwY2tyeS5yZWxvYWRJdGVtcygpXHJcbiAgcGNrcnkubGF5b3V0KCk7XHJcblxyXG4gIC8vYWRqdXN0IHNjcm9sbGJhclxyXG4gIHNjcm9sbFguYWRqdXN0U2l6ZSgpO1xyXG5cclxuICByZXR1cm4gZ3JpZEl0ZW07XHJcbn1cclxuXHJcblxyXG5JbWFnZVBvc3QucHJvdG90eXBlLnNob3dDb21tZW50cyA9IChmdW5jdGlvbigpIHtcclxuICBsZXQgY29tbWVudHNEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29tbWVudHMnKVxyXG4gIHJldHVybiBmdW5jdGlvbihpZCkge1xyXG4gICAgLy8gY2xlYXIgZGl2XHJcbiAgICBjb21tZW50c0Rpdi5pbm5lckhUTUwgPSAnJztcclxuICAgIHRoaXMuY29tbWVudHMuZm9yRWFjaCgoY29tbWVudCkgPT4ge1xyXG4gICAgICBjb21tZW50LnB1dE9uUGFnZShjb21tZW50c0Rpdik7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyAndHJ1ZScgbWVhbnMsIHRoYXQgd2UganVtcCB0byAwIHNjcm9sbCBcclxuICAgIHNjcm9sbFkuYWRqdXN0U2l6ZSh0cnVlKTtcclxuXHJcbiAgICAvLyB1cGRhdGUgaWNvbnMgYW5kIGNvbW1lbnRzIG51bWJlclxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLWNvbW1lbnRzIGgyIHNwYW4nKVxyXG4gICAgLnRleHRDb250ZW50ID0gdGhpcy5jb21tZW50cy5sZW5ndGg7XHJcblxyXG4gICAgaWYgKGlkKSB7XHJcbiAgICAgIHRoaXMubm9kZS5xdWVyeVNlbGVjdG9yKCcuc3ByaXRlLWNvbW1lbnQnKVxyXG4gICAgICAuc2V0QXR0cmlidXRlKCdkYXRhLWNvdW50JywgdGhpcy5jb21tZW50cy5sZW5ndGgpO1xyXG4gICAgfVxyXG4gIH07XHJcbn0pKCk7XHJcblxyXG5mdW5jdGlvbiBDb21tZW50KHRleHQsIG5pY2tuYW1lLCBkYXRlKSB7XHJcbiAgdGhpcy50ZXh0ID0gdGV4dDtcclxuICB0aGlzLm5pY2tuYW1lID0gbmlja25hbWU7XHJcbiAgdGhpcy5kYXRlID0gcGFyc2VEYXRlKG5ldyBEYXRlKGRhdGUpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VEYXRlKGRhdGUpIHtcclxuICBsZXQgbWludXRlcyA9IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gIG1pbnV0ZXMgPSAobWludXRlcyA8IDEwKSA/ICcwJyArIG1pbnV0ZXMgOiBtaW51dGVzO1xyXG4gIGxldCBob3VycyA9IGRhdGUuZ2V0SG91cnMoKTtcclxuICBsZXQgZGF5UGFydCA9IChob3VycyA+IDEyKSA/ICdQTScgOiAnQU0nO1xyXG4gIGhvdXJzID0gKGhvdXJzID4gMTIpID8gaG91cnMgLSAxMiA6IGhvdXJzO1xyXG5cclxuICBsZXQgb25lRGF5ID0gMjQqNjAqNjAqMTAwMDtcclxuICBsZXQgZGlmZiwgZGlmZkRheXMsIGRpZmZNb250aCwgZGlmZlllYXIsIG5vdyA9IG5ldyBEYXRlKCk7XHJcblxyXG4gIGRpZmZEYXlzID0gTWF0aC5yb3VuZCgobm93IC0gZGF0ZSkgLyBvbmVEYXkpO1xyXG4gIGRpZmZZZWFyID0gbm93LmdldEZ1bGxZZWFyKCkgLSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcblxyXG4gIGlmIChkaWZmRGF5cyA+IDM2NSkge1xyXG4gICAgbGV0IHllYXIgPSAoZGlmZlllYXIgPT0gMSkgPyAnIHllYXInIDogJyB5ZWFycyc7XHJcbiAgICBkaWZmID0gZGlmZlllYXIgKyB5ZWFyICsgJyBhZ28nO1xyXG4gIH0gZWxzZSBpZiAoZGlmZkRheXMgPiAzMSkge1xyXG4gICAgZGlmZk1vbnRoID0gbm93LmdldE1vbnRoKCkgLSBkYXRlLmdldE1vbnRoKCk7XHJcbiAgICBpZiAoZGlmZlllYXIpIGRpZmZNb250aCArPSAxMjtcclxuICAgIGxldCBtb250aCA9IChkaWZmTW9udGggPT0gMSkgPyAnIG1vbnRoJyA6ICcgbW9udGhzJztcclxuICAgIGRpZmYgPSBkaWZmTW9udGggKyBtb250aCArICcgYWdvJztcclxuICB9IGVsc2UgaWYgKGRpZmZEYXlzID4gMSkge1xyXG4gICAgZGlmZiA9IGRpZmZEYXlzICsgJyBkYXlzIGFnbyc7XHJcbiAgfSBlbHNlIGlmIChkaWZmRGF5cyA9PSAxKSB7XHJcbiAgICBkaWZmID0gJ1llc3RlcmRheSc7XHJcbiAgfSBlbHNlIHtcclxuICAgIGRpZmYgPSAnVG9kYXknO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGRpZmYgKyAnICcgKyBob3VycyArICc6JyArIG1pbnV0ZXMgKyAnICcgKyBkYXlQYXJ0O1xyXG59XHJcblxyXG5Db21tZW50LnByb3RvdHlwZS5wdXRPblBhZ2UgPSBmdW5jdGlvbihwYXJlbnROb2RlKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlU3BhbihjbGFzc05hbWUsIHRleHRDb250ZW50KSB7XHJcbiAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1NQQU4nKTtcclxuICAgIHNwYW4uY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gICAgc3Bhbi50ZXh0Q29udGVudCA9IHRleHRDb250ZW50O1xyXG4gICAgcmV0dXJuIHNwYW47XHJcbiAgfVxyXG5cclxuICBsZXQgY29tbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xyXG4gIGNvbW1lbnQuY2xhc3NOYW1lID0gJ2NvbW1lbnQnO1xyXG5cclxuICBjb21tZW50LmFwcGVuZENoaWxkKGNyZWF0ZVNwYW4oJ25pY2tuYW1lJywgdGhpcy5uaWNrbmFtZSkpO1xyXG4gIGNvbW1lbnQuYXBwZW5kQ2hpbGQoY3JlYXRlU3BhbignZGF0ZScsIHRoaXMuZGF0ZSkpO1xyXG5cclxuICBsZXQgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xyXG4gIHRleHQuY2xhc3NOYW1lID0gJ2NvbW1lbnQtdGV4dCc7XHJcbiAgdGV4dC5hcHBlbmRDaGlsZChjcmVhdGVTcGFuKCcnLCB0aGlzLnRleHQpKTtcclxuICBjb21tZW50LmFwcGVuZENoaWxkKHRleHQpO1xyXG5cclxuICBwYXJlbnROb2RlLmFwcGVuZENoaWxkKGNvbW1lbnQpO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBJbWFnZUNvbGxlY3Rpb247XHJcblxyXG59KCkpO1xyXG5cbn0se1wiLi9zY3JvbGxiYXIuZXM2LmpzXCI6M31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLy9UT0RPOiBhZGQgd2hlZWwgZXZlbnRzXHJcbigoKSA9PiB7XHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbi8qKlxyXG4gKiBDb25zdHJ1Y3RvciBmdW5jdGlvbiBmb3Igc2Nyb2xsYmFyc1xyXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBzY3JvbGxCYXJcclxuICogQHBhcmFtIHtTdHJpbmd9ICdoJyBmb3IgaG9yaXpvbnRhbCB8fCAndicgZm9yIHZlcnRpY2FsXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IHdpdGggbWV0aG9kcyBmb3IgaGFuZGxpbmcgc2Nyb2xsYmFyXHJcbiAqL1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBTY3JvbGxiYXIoc2Nyb2xsQmFyLCBkaXJlY3Rpb24pIHtcclxuICBsZXQgc2Nyb2xsQm94ID0gc2Nyb2xsQmFyLnBhcmVudE5vZGU7XHJcbiAgbGV0IHNjcm9sbGVkQXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JcclxuICAgICAgICAgICAgICAgICAgIChzY3JvbGxCb3guZ2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbGVkLWFyZWEnKSk7XHJcbiAgbGV0IHNjcm9sbGVkQm94ID0gc2Nyb2xsZWRBcmVhLnBhcmVudE5vZGU7XHJcblxyXG4gIC8vIGRlcGVuZHMgb24gZGlyZWN0aW9uIG9mIHRoZSBzY3JvbGxiYXJcclxuICBsZXQgW2NsaWVudFNpemVQcm9wLCBzaXplUHJvcCwgbWFyZ2luUHJvcCwgY2xpZW50QXhpcywgc2Nyb2xsUHJvcF0gPSAoZGlyZWN0aW9uID09ICdoJykgP1xyXG4gIFsnY2xpZW50V2lkdGgnLCAnd2lkdGgnLCAnbWFyZ2luTGVmdCcsICdjbGllbnRYJywgJ3Njcm9sbExlZnQnXSA6XHJcbiAgWydjbGllbnRIZWlnaHQnLCAnaGVpZ2h0JywgJ21hcmdpblRvcCcsICdjbGllbnRZJywgJ3Njcm9sbFRvcCddO1xyXG5cclxuXHJcbiAgLy8gaWYgZ3JpZCBpcyB3aWRlciByZXR1cm5zIHRoZSBkaWZmZXJlbmNlIGluIHBlcmNlbnRzXHJcbiAgLy8gb3RoZXJ3aXNlIHJldHVybnMgMTAwJVxyXG4gIGxldCBnZXRBcmVhVG9Cb3hSYXRpbyA9ICgpID0+IHtcclxuICAgIGxldCBhcmVhU2l6ZSA9IHNjcm9sbGVkQXJlYVtjbGllbnRTaXplUHJvcF07XHJcbiAgICBsZXQgYm94U2l6ZSA9IHNjcm9sbGVkQm94W2NsaWVudFNpemVQcm9wXTtcclxuXHJcbiAgICBpZiAoZGlyZWN0aW9uID09ICd2Jykge1xyXG4gICAgICAvLyBjb25zb2xlLmxvZygnQXJlYTonLCBzY3JvbGxlZEFyZWEsIHNjcm9sbGVkQXJlYVtjbGllbnRTaXplUHJvcF0sICdcXG5Cb3g6Jywgc2Nyb2xsZWRCb3gsIHNjcm9sbGVkQm94W2NsaWVudFNpemVQcm9wXSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGFyZWFTaXplID4gYm94U2l6ZSkge1xyXG4gICAgICByZXR1cm4gKGJveFNpemUgLyBhcmVhU2l6ZSAqIDEwMCkgKyAnJSc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gMTAwICsgJyUnO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEVuYWJsZSBzY3JvbGwgaWYgYXJlYSBpcyB3aWRlclxyXG4gICAqIHNldHMgc2l6ZSBvZiBzY3JvbGwtYmFyXHJcbiAgICogYWRkcyBhbmQgcmVtb3ZlcyB3aGVlbCBsaXN0ZW5lcnNcclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59ICd0cnVlJyAtPiBqdW1wcyB0byB6ZXJvIHNjcm9sbFxyXG4gICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XHJcbiAgICovXHJcbiAgdGhpcy5hZGp1c3RTaXplID0gKHRvSW5pdGlhbCkgPT4ge1xyXG4gICAgbGV0IHJhdGlvID0gZ2V0QXJlYVRvQm94UmF0aW8oKTtcclxuXHJcbiAgICBpZiAodG9Jbml0aWFsKSB0aGlzLmp1bXBUbygwKTtcclxuXHJcbiAgICBpZiAocmF0aW8gPT0gJzEwMCUnKSB7XHJcbiAgICAgIHNjcm9sbEJveC5zdHlsZS5vcGFjaXR5ID0gMDtcclxuICAgICAgc2Nyb2xsZWRCb3gucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBvbldoZWVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNjcm9sbEJveC5zdHlsZS5vcGFjaXR5ID0gMTtcclxuICAgICAgc2Nyb2xsQmFyLnN0eWxlW3NpemVQcm9wXSA9IHJhdGlvO1xyXG4gICAgICBzY3JvbGxlZEJveC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIG9uV2hlZWwpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGxldCBvbldoZWVsID0gKGUpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCd3aGVlbCcpO1xyXG5cclxuICAgIC8vIHByZXZlbnQgcGFnZSBzY3JvbGxpbmdcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICB9XHJcblxyXG4gIC8vIGV2ZW50IGhhbmRsZXIgZm9yIHNjcm9sbGJhcnNcclxuXHJcbiAgLy8gdXNlIGNsb3N1cmUgdG8ga2VlcCB0cmFjayBvZiBtb3VzZSBtb3ZlXHJcbiAgLy8gYW5kIGF0dGFjaCBldmVudCBoYW5kbGVyIHRvIHdpbmRvdyBvbmx5IG9uY2VcclxuICBsZXQgb25Nb3ZlID0gKCgpID0+IHtcclxuICAgIC8vWCBmb3Igc2Nyb2xsQmFyWCBhbmQgWSBmb3Igc2Nyb2xsQmFyWVxyXG4gICAgbGV0IGxhc3RNb3VzZVBvaW50ID0gbnVsbCxcclxuICAgICAgICBtYXJnaW4gPSBwYXJzZUZsb2F0KHdpbmRvdy5cclxuICAgICAgICAgICAgICAgICBnZXRDb21wdXRlZFN0eWxlKHNjcm9sbEJhcilbbWFyZ2luUHJvcF0pLFxyXG4gICAgICAgIHNjcm9sbEJveFNpemUgPSBzY3JvbGxCYXIucGFyZW50Tm9kZVtjbGllbnRTaXplUHJvcF07XHJcblxyXG4gICAgLy8ganVucHMgdG8gZ2l2ZW4gc2Nyb2xsIHBvaW50XHJcbiAgICB0aGlzLmp1bXBUbyA9IChwb2ludCkgPT4ge1xyXG4gICAgICBtYXJnaW4gPSBwb2ludDtcclxuICAgICAgc2Nyb2xsQmFyLnN0eWxlW21hcmdpblByb3BdID0gcG9pbnQ7XHJcbiAgICAgIHNjcm9sbGVkQm94W3Njcm9sbFByb3BdID0gcG9pbnQ7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGlzT25CZWdpbigpIHtcclxuICAgICAgcmV0dXJuIG1hcmdpbiA8PSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzT25FbmQoKSB7XHJcbiAgICAgIHJldHVybiBvbk1vdmUuc2Nyb2xsQmFyU2l6ZSArIG1hcmdpbiA+PSBzY3JvbGxCb3hTaXplO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNjcm9sbFRvKCkge1xyXG4gICAgICBpZiAoaXNPbkJlZ2luKCkpIHtcclxuICAgICAgICBzY3JvbGxCYXIuc3R5bGVbbWFyZ2luUHJvcF0gPSBtYXJnaW4gPSAwO1xyXG4gICAgICAgIC8vIHRvIHByZXZlbnQgaW5zdWZmaWNpZW50IHNjcm9sbCwgd2hlbiBicm93c2VyIHJlbmRlcnMgc2Nyb2xsIHRvIHNsb3dcclxuICAgICAgICBzY3JvbGxlZEJveFtzY3JvbGxQcm9wXSA9IDA7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICAvL3ByZXZlbnQgZHJhZ2dpbmcgdG8gcmlnaHQgaWYgb24gZWRnZVxyXG4gICAgICB9IGVsc2UgaWYgKGlzT25FbmQoKSkge1xyXG4gICAgICAgIG1hcmdpbiA9IHNjcm9sbEJveFNpemUgLSBvbk1vdmUuc2Nyb2xsQmFyU2l6ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgb25Nb3ZlLmN1cnJlbnRUYXJnZXQuc3R5bGVbbWFyZ2luUHJvcF0gPSBtYXJnaW4gKyAncHgnO1xyXG4gICAgICAvL2FkanVzdCBncmlkIHBvc2l0aW9uIGR1ZSB0byBwZXJjZW50YWdlIHZhbHVlIG9mIHNjcm9sbC1iYXIgbWFyZ2luXHJcbiAgICAgIC8vKioqLT4tPi0+IHNjcm9sbGJhclttYXJnaW5Qcm9wXSAvIHBhcmVudC53aWR0aCA9IC1ncmlkW21hcmdpblByb3BdIC8gZ3JpZC53aWR0aCA8LTwtPC0qKipcclxuICAgICAgLy8gc2Nyb2xsZWRCb3hbc2Nyb2xsUHJvcF0gPSBtYXJnaW4gLyBzY3JvbGxCb3hTaXplICogc2Nyb2xsQXJlYVNpemU7XHJcbiAgICAgIHNjcm9sbGVkQm94W3Njcm9sbFByb3BdID0gbWFyZ2luIC8gc2Nyb2xsQm94U2l6ZSAqIG9uTW92ZS5zY3JvbGxBcmVhU2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICAvL29uTW92ZSBIYW5kbGVyXHJcbiAgICBsZXQgb25Nb3ZlID0gKGUpID0+IHtcclxuICAgICAgbGV0IGRpZmYsXHJcbiAgICAgICAgICBzY3JvbGxCYXIgPSBvbk1vdmUuY3VycmVudFRhcmdldCxcclxuICAgICAgICAgIHNjcm9sbEJhclNpemUgPSBvbk1vdmUuc2Nyb2xsQmFyU2l6ZTtcclxuXHJcbiAgICAgIGlmICghc2Nyb2xsQm94U2l6ZSkgc2Nyb2xsQm94U2l6ZSA9IHNjcm9sbEJhci5wYXJlbnROb2RlW2NsaWVudFNpemVQcm9wXTtcclxuXHJcbiAgICAgIC8vcmVtZW1iZXIgaW5pdGlhbCBwb3NpdGlvbiBvZiB0aGUgbW91c2VcclxuICAgICAgaWYgKGxhc3RNb3VzZVBvaW50ID09PSBudWxsKSB7XHJcbiAgICAgICAgbGFzdE1vdXNlUG9pbnQgPSBlW2NsaWVudEF4aXNdO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICAvLyBnZXQgbW91c2UgbW92ZVxyXG4gICAgICBkaWZmID0gZVtjbGllbnRBeGlzXSAtIGxhc3RNb3VzZVBvaW50O1xyXG4gICAgICBsYXN0TW91c2VQb2ludCA9IGVbY2xpZW50QXhpc107XHJcblxyXG4gICAgICBtYXJnaW4gKz0gZGlmZjtcclxuICAgICAgc2Nyb2xsVG8obWFyZ2luKTtcclxuICAgIH07XHJcblxyXG4gICAgLy90byBkaXNhYmxlIHNjcm9sbGluZyBvbm1vdXNldXBcclxuICAgIGxldCByZW1vdmVTY3JvbGxMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdmUpO1xyXG4gICAgICBsYXN0TW91c2VQb2ludCA9IG51bGw7XHJcbiAgICB9O1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgcmVtb3ZlU2Nyb2xsTGlzdGVuZXJzKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgcmVtb3ZlU2Nyb2xsTGlzdGVuZXJzKTtcclxuXHJcbiAgICByZXR1cm4gb25Nb3ZlO1xyXG4gIH0pKCk7XHJcblxyXG4gIHNjcm9sbEJhci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4ge1xyXG4gICAgLy9yZW1lbWJlciB3aGljaCBzY3JvbGxiYXIgd2UgYXJlIGN1cnJlbnRseSBvblxyXG4gICAgb25Nb3ZlLmN1cnJlbnRUYXJnZXQgPSBlLnRhcmdldDtcclxuXHJcbiAgICAvL3JlbWVtYmVyIHNpemUgb2YgdGhlIHNjcm9sbGJhciBhbmQgd2lkdGggb2YgdGhlIHNjcm9sbEFyZWFcclxuICAgIC8vdGhleSBhcmUgbmVlZGVkIGZvciBkcmFnZ2luZyBjb21wdXRhdGlvbnNcclxuICAgIG9uTW92ZS5zY3JvbGxCYXJTaXplID0gZS50YXJnZXRbY2xpZW50U2l6ZVByb3BdO1xyXG4gICAgb25Nb3ZlLnNjcm9sbEFyZWFTaXplID0gc2Nyb2xsZWRBcmVhW2NsaWVudFNpemVQcm9wXTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3ZlKTtcclxuICB9KTtcclxuXHJcbn07XHJcblxyXG59KSgpO1xyXG5cbn0se31dfSx7fSxbMV0pIl19
